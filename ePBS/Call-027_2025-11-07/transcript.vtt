WEBVTT

1
00:02:09.520 --> 00:02:11.069
Justin Traglia: Good morning, Pooja.

2
00:02:12.430 --> 00:02:14.259
Pooja Ranjan: Morning, Justin, how are you?

3
00:02:14.760 --> 00:02:16.550
Justin Traglia: I'm doing well, and yourself?

4
00:02:17.000 --> 00:02:18.529
Pooja Ranjan: Very well, thank you.

5
00:02:19.250 --> 00:02:22.829
Pooja Ranjan: So, I'll be helping with streaming. Feel free to…

6
00:02:23.380 --> 00:02:30.069
Pooja Ranjan: Like, set up, and, we'll go pre-streaming in, like, Two, three minutes?

7
00:02:30.700 --> 00:02:32.949
Justin Traglia: Okay, sounds good. Thank you.

8
00:06:18.200 --> 00:06:20.370
Justin Traglia: Good morning, protests and parents.

9
00:06:21.880 --> 00:06:23.200
potuz: I'm gonna…

10
00:06:23.830 --> 00:06:29.889
potuz: be out for a few minutes, I want to, like, write a quick PR for the Randall thing.

11
00:06:30.930 --> 00:06:32.809
Justin Traglia: Okay. Should we discuss?

12
00:06:33.020 --> 00:06:37.919
Justin Traglia: other stuff before your two topics. They add off protocol, value to bid and stuff?

13
00:06:39.560 --> 00:06:40.290
Justin Traglia: Okay.

14
00:06:47.390 --> 00:06:51.969
Justin Traglia: We're on second thought, we're gonna go over client team updates, so it'll be fine.

15
00:07:55.620 --> 00:07:56.970
Stefan Bratanov: Hello.

16
00:07:59.060 --> 00:08:01.649
Justin Traglia: Good morning, Stefan and Mehdi.

17
00:08:03.890 --> 00:08:04.620
Mehdi Aouadi: Bye, guys.

18
00:08:06.260 --> 00:08:08.080
Justin Traglia: We'll start in just a minute.

19
00:08:21.870 --> 00:08:27.250
Justin Traglia: Yeah, in the US, there was the time change, time change last week, so…

20
00:08:27.710 --> 00:08:30.700
Justin Traglia: This call is unexpectedly 1 hour sooner for me.

21
00:08:30.900 --> 00:08:32.249
Justin Traglia: Kinda caught me off guard.

22
00:08:35.710 --> 00:08:37.640
Justin Traglia: Oh yeah, 6 AM, that's tough.

23
00:09:04.140 --> 00:09:11.389
Justin Traglia: I think this might be it for today. We're 3 minutes after the start of the meeting, so… Pooja, can you start the stream for us, please?

24
00:09:11.790 --> 00:09:13.070
Justin Traglia: Er, Caroline?

25
00:09:13.320 --> 00:09:14.410
Pooja Ranjan: We are life.

26
00:09:15.440 --> 00:09:21.429
Justin Traglia: Alright, thank you. Hello everyone, welcome to EPBS Breakout Call 27.

27
00:09:24.040 --> 00:09:35.210
Justin Traglia: I guess we can… I can quickly mention that there are two new specification releases, so V1.6.0 Beta 2, and then the stable V.1.6.0 release.

28
00:09:36.010 --> 00:09:43.610
Justin Traglia: Those primarily focus on GLOS, and include some new tests and spec changes. I suspect several of you have already

29
00:09:44.310 --> 00:09:48.970
Justin Traglia: updated to… Track that. So, thank you.

30
00:09:49.790 --> 00:09:59.220
Justin Traglia: There were a few merged PRs, I don't need to go over all of them, but I've checked them here, and there is one new open PR, which I have not

31
00:09:59.350 --> 00:10:00.669
Justin Traglia: Reviewed yet.

32
00:10:00.810 --> 00:10:02.610
Justin Traglia: But maybe… oh.

33
00:10:04.810 --> 00:10:07.849
Justin Traglia: And then one other one that POTUS just shared in the chat.

34
00:10:08.360 --> 00:10:10.540
Justin Traglia: I'll get added right now.

35
00:10:11.120 --> 00:10:12.350
Justin Traglia: Oh, okay.

36
00:10:14.830 --> 00:10:23.580
Justin Traglia: Thank you, POTUS we can talk more about that, and, Stefan's agenda item.

37
00:10:24.990 --> 00:10:27.300
Justin Traglia: I'll add it to the agenda later, thank you.

38
00:10:28.800 --> 00:10:37.099
Justin Traglia: I guess we should move on to client, implementation updates. Prism, could someone from Prism get us started? Terrence or Protus?

39
00:10:37.100 --> 00:10:47.420
terence: Mmm… We'll be mostly focusing on Fusaka Mainnet, so not much progress in terms of just, like, merging,

40
00:10:47.420 --> 00:10:59.050
terence: EPBS-related, implementation into the main developer branch, so we merged the, container branch, which contains all the container objects, so that was

41
00:10:59.060 --> 00:11:17.700
terence: pretty much the baseline, and now we're focusing on merging the other things, but yeah, after, I think, this week, once we have the mainnet release for Fusatra, we'll see more progress. Other than that, we have a bunch of PRs that pass the spec test for the BK and spec.

42
00:11:17.700 --> 00:11:22.640
terence: But not much after that. Yeah, so… but we'll see more progress soon.

43
00:11:25.210 --> 00:11:28.060
Justin Traglia: Okay, thank you. And yeah, totally expected.

44
00:11:28.440 --> 00:11:31.730
Justin Traglia: Is there anyone here from Lighthouse that could give an update?

45
00:11:34.350 --> 00:11:35.260
Shane Moore: Okay.

46
00:11:35.430 --> 00:11:44.139
Shane Moore: Yeah, a few of my PRs related to block processing are getting merged into Lighthouse, you know, like prosecution, bid, process withdrawals type of stuff.

47
00:11:44.520 --> 00:11:59.840
Shane Moore: I know we have, Ethan who's joined as well, the effort. He's, working on Seek Manager-related changes for, like, execution payload by envelope type of stuff. And then, I think Mark's doing, some envelope processing, like, so payload processing splits.

48
00:12:00.090 --> 00:12:01.440
Shane Moore: That's just an update of stuff.

49
00:12:04.390 --> 00:12:05.180
Justin Traglia: Nice.

50
00:12:05.990 --> 00:12:09.269
Justin Traglia: Thank you. Okay, someone from Taeku, please?

51
00:12:11.220 --> 00:12:15.370
Stefan Bratanov: Yeah, not much update from our side,

52
00:12:15.630 --> 00:12:25.089
Stefan Bratanov: Yeah, we've also been focusing on documentary release. Mary is working on some attestation, gossip changes.

53
00:12:25.200 --> 00:12:29.339
Stefan Bratanov: And… yeah, apart from that, not that much of that.

54
00:12:32.140 --> 00:12:36.089
Justin Traglia: Okay. Is there anyone here from NEMBUS?

55
00:12:40.010 --> 00:12:43.310
Justin Traglia: I don't think so.

56
00:12:43.540 --> 00:12:46.140
Justin Traglia: NC, from Lodestar, could you give an update?

57
00:12:48.300 --> 00:13:00.230
NC: Yeah, so, so last week we have, we got everything in the beacon chain spec implemented and tested. We passed those associated spec tests.

58
00:13:00.790 --> 00:13:09.530
NC: Nico is, looking at the blog production stuff, and I'm, working on the gossip change.

59
00:13:13.820 --> 00:13:15.430
Justin Traglia: Okay. Thank you.

60
00:13:15.550 --> 00:13:18.899
Justin Traglia: And, last but not least, is there anyone from Grantine?

61
00:13:19.080 --> 00:13:20.339
Justin Traglia: They can give an update.

62
00:13:20.910 --> 00:13:21.560
Subhasish: Yeah.

63
00:13:21.760 --> 00:13:23.060
Subhasish: I can go ahead.

64
00:13:23.410 --> 00:13:30.129
Subhasish: So, there are some open PRs around, Gossip Sub and RPC changes.

65
00:13:30.180 --> 00:13:45.680
Subhasish: And, most of the, sync work is complete, except some of the storage and persistence, stuff. So, so we made some progress on, the networking side as well.

66
00:13:45.680 --> 00:13:51.330
Subhasish: I think the… over the next 2-3 weeks, I think we'd have something.

67
00:13:51.350 --> 00:13:52.380
Subhasish: I guess.

68
00:13:52.560 --> 00:13:53.360
Subhasish: Yeah.

69
00:13:55.560 --> 00:13:56.910
Justin Traglia: Okay, thank you.

70
00:13:57.650 --> 00:13:59.509
Justin Traglia: And, do we have any…

71
00:13:59.760 --> 00:14:07.920
Justin Traglia: estimates for, like, when we think DevNet Zero might be ready. I'm kind of personally thinking it'll probably be next year, like, mid-January.

72
00:14:08.260 --> 00:14:09.439
Justin Traglia: At the earliest.

73
00:14:09.580 --> 00:14:11.130
Justin Traglia: Does that sound right?

74
00:14:11.800 --> 00:14:12.620
Justin Traglia: Okay.

75
00:14:14.250 --> 00:14:21.520
Justin Traglia: Yeah, in my opinion, the rest of this year should probably be focused on Fusaka and making sure that goes smoothly, so…

76
00:14:22.800 --> 00:14:31.999
Justin Traglia: Okay, otis, would you like to talk about off… adding an off-protocol value field to the…

77
00:14:32.640 --> 00:14:49.049
potuz: Sure, it's a pity that, Francesca's not here, I think. Oh, no, Francesco is here. I'm here. Okay, good. So, yeah, so we… I reacted negatively because I didn't want to have this off-protocol value, being part of consensus.

78
00:14:49.640 --> 00:14:52.319
potuz: But, I think I was wrong.

79
00:14:52.650 --> 00:14:56.270
potuz: The… if we put this in the bed.

80
00:14:56.520 --> 00:15:02.710
potuz: Then, we can actually have the clients check if this has been paid or not, or…

81
00:15:02.940 --> 00:15:15.890
potuz: at least do some sort of check that the fee recipient actually increased the balance. And it could be tricked by the proposer itself, so this… but I don't see how this is an attack.

82
00:15:17.860 --> 00:15:30.359
potuz: So there's something that can be done if we put this in the bid, instead of on the builder API, then the client can do some validation that the builder is actually paying

83
00:15:30.570 --> 00:15:36.389
potuz: Which is something that we cannot do today with MapBoost, and we're just trusting the relay to do this check.

84
00:15:37.080 --> 00:15:38.909
potuz: So I don't know, I'm…

85
00:15:39.400 --> 00:15:46.980
potuz: Yeah, I'm just admitting that I was wrong, and that I want to take that back, I want to put it in the bid, but I don't know how people feel about it.

86
00:15:55.270 --> 00:16:01.099
Justin Traglia: I haven't thought about it personally, but how do other client teams feel, if they have… if you have an opinion?

87
00:16:07.220 --> 00:16:08.290
Justin Traglia: Okay.

88
00:16:08.290 --> 00:16:11.299
Shane Moore: What are some of the cons of doing it? We had it.

89
00:16:13.960 --> 00:16:16.429
potuz: I'm sorry, Shane, I didn't… I didn't get that.

90
00:16:16.430 --> 00:16:24.209
Shane Moore: I was asking, if we add, the off-protocol value to the bid, what are some of the cons? You just mentioned some of the pros, so I was just curious, like, what are the.

91
00:16:24.210 --> 00:16:24.740
potuz: Well…

92
00:16:24.740 --> 00:16:27.310
Shane Moore: Yeah, oh, slightly larger size, I guess.

93
00:16:27.540 --> 00:16:28.550
potuz: No, the…

94
00:16:28.550 --> 00:16:29.809
Shane Moore: It's, like, one little value.

95
00:16:29.810 --> 00:16:40.380
potuz: Yeah, that's not a problem. I mean, these things are not even going to propagate that much. The problem for me is sort of like a philosophical problem of enshrining this off-protocol thing

96
00:16:40.480 --> 00:16:42.049
potuz: On the beacon state.

97
00:16:42.740 --> 00:16:44.680
potuz: Which… which kind of sucks.

98
00:16:45.190 --> 00:16:54.269
potuz: But this is going to happen anyways if we put it in the engine API, and it off… it actually helps the protocol having these payments,

99
00:16:54.610 --> 00:17:00.589
potuz: outside of the churn of the withdrawal, so I'm not opposed to this kind of payments being even the default.

100
00:17:04.730 --> 00:17:07.469
Shane Moore: Yeah, I mean, this is gonna be the most, like, used value.

101
00:17:07.990 --> 00:17:13.969
Shane Moore: comparison to the normal in-protocol bid, then that's, I guess, a strong Point for it.

102
00:17:16.319 --> 00:17:17.189
Justin Traglia: Parents?

103
00:17:19.079 --> 00:17:43.969
terence: I'm not so sure how I… like, I guess, I mean, this is, like, an open question for me. It's like, do we… like, does it matter whether the EL client is, like, ready at day one? Because you can think of, like, EL client, like, this makes it more like an optional type of field, that EL client, for example, is not dependent, because, like, for example, the payload is not gonna be invalid if it doesn't pay this bid, right?

104
00:17:43.969 --> 00:17:56.629
terence: I presume. So, basically, the EL client just kind of tells you, for example, that it's not, like, satisfied, and then you basically just log in on the CL client side, or you can also

105
00:17:56.629 --> 00:18:09.639
terence: Blacklist the builder, for example, but, like, are you thinking to make this, like, a requirement such that if it doesn't satisfy the bid, you just return the invalid payload or something?

106
00:18:09.640 --> 00:18:20.659
potuz: No, no, not at all. I mean, this is a trusted thing, so why… why would we, like, make it invalid? Also, because then it… the client… the proposer itself can try… can try to trick it.

107
00:18:20.770 --> 00:18:34.869
potuz: And I don't think we want to even change the engine API for this, so to have a check that the fee recipient increased by something, you can just use the ETH API for this, like what we used to do for deposits.

108
00:18:35.810 --> 00:18:40.730
potuz: I don't know, perhaps in the future, we can just ask on new payload.

109
00:18:40.920 --> 00:18:53.669
potuz: if the… if it did satisfy… I mean, we kind of have that in the engine API as well, that when you send new payload, the engine replies with, what was the value for the field recipient? I mean, we can talk about that too.

110
00:18:53.830 --> 00:18:56.429
potuz: And we can add this check to the engine API.

111
00:18:57.630 --> 00:19:00.130
potuz: But in principle, it's not really necessary.

112
00:19:01.970 --> 00:19:15.789
terence: Okay, yeah, because I thought you were going to do it at the NG API, but it doesn't have to be, yeah, because I thought because you want to do the, censorship on the NG API, you might as well do this one as well, but yeah, got it.

113
00:19:21.430 --> 00:19:26.499
Justin Traglia: Is this something that needs to be brought up at ACDC, next, or next week?

114
00:19:28.110 --> 00:19:40.579
potuz: I don't think so. This is, this is just a minor thing on… as of now, it's just a minor thing of moving something that is not yet in the beacon… in the builder API, adding it to the… to the bid.

115
00:19:40.680 --> 00:19:46.840
potuz: If we do need to change the engine API, which I'm going to propose anyways, depending on what's going to happen with Fossil.

116
00:19:47.150 --> 00:19:50.120
potuz: Then we can just bring this to the engine API.

117
00:19:50.540 --> 00:19:54.359
potuz: And we can bring this to ACD, or ACDT, perhaps, to…

118
00:19:54.810 --> 00:19:58.730
potuz: to discuss what change… I mean, if the changes to the engine API are bad.

119
00:19:59.720 --> 00:20:00.330
Justin Traglia: Nope.

120
00:20:00.570 --> 00:20:01.560
Justin Traglia: Maybe.

121
00:20:01.560 --> 00:20:06.529
potuz: It's easy how it looks on the Engine API. So on the Engine API, when we send

122
00:20:06.820 --> 00:20:14.330
potuz: And notifying new payload, Then, when we are sending this, we need to send the fee recipient

123
00:20:14.590 --> 00:20:25.640
potuz: And when we receive a reply about if it's valid or syncing or whatever it is, the engine should reply of what was the increase in the value on that fee recipient.

124
00:20:26.240 --> 00:20:32.710
potuz: What was the change of state from before the payload to after the payload on that fee recipient that we just sent?

125
00:20:33.750 --> 00:20:34.440
Justin Traglia: Got it.

126
00:20:35.710 --> 00:20:44.429
Justin Traglia: If you open up PR, we can discuss it there, like, and if it gets enough approvals, we might just be able to merge it before ACDC.

127
00:20:46.600 --> 00:20:59.119
potuz: But the way, this can probably be done directly on the CL side, if we parse… I mean, I know everyone is going to be against it, and I'm going to be against it as well, but if we parse the block-level access list, we could just do this directly on the CL side.

128
00:21:01.680 --> 00:21:04.600
Justin Traglia: parse the L and the CL.

129
00:21:05.810 --> 00:21:07.090
potuz: Well, it's in the payload.

130
00:21:11.200 --> 00:21:13.470
Justin Traglia: Yeah, I don't know. Personally not a fan of that.

131
00:21:13.650 --> 00:21:17.220
potuz: Yeah, I definitely… yeah, I don't like it either.

132
00:21:20.330 --> 00:21:27.179
Justin Traglia: And Francesco, brought up the idea of, like, maybe just having an enforced payment Boolean instead.

133
00:21:28.200 --> 00:21:31.479
Justin Traglia: My opinion is that I'd rather just have value.

134
00:21:32.480 --> 00:21:34.310
Justin Traglia: If we're gonna do this.

135
00:21:37.320 --> 00:21:40.650
Shane Moore: Is there a benefit to enforced payment if you…

136
00:21:40.820 --> 00:21:56.689
Shane Moore: Right now, we're looking at the bid, and you saw value and, like, the protocol value. You wouldn't really know which one was, like, selected in the end, but if you have the enforced payment Boolean, at least you could tell by looking at, say, like, the bid.

137
00:21:56.980 --> 00:22:01.259
Shane Moore: Oh, okay, we're basically gonna ignore the protocol value here.

138
00:22:05.300 --> 00:22:07.009
Justin Traglia: Otis, do you have an opinion on this?

139
00:22:07.010 --> 00:22:10.520
potuz: I didn't understand what is this enforced payment boolean, so…

140
00:22:10.520 --> 00:22:22.179
Francesco: I'm just saying, like, instead of having value and off-peracle value, just have value, and then a boolean that says if value is to be enforced or not, and if it's not to be enforced, then it's just an off-protocol value.

141
00:22:23.730 --> 00:22:27.329
potuz: Oh… Okay, so this in the bid, you mean?

142
00:22:28.120 --> 00:22:29.440
Francesco: Yeah, in the… in the bid.

143
00:22:29.440 --> 00:22:31.719
potuz: Yeah, that's gonna be a larger change.

144
00:22:32.140 --> 00:22:39.959
potuz: Both in the spec, and it's, like, kind of ugly to reason about. Currently, if we just added this off-protocol value.

145
00:22:40.270 --> 00:22:43.350
potuz: We can just deal with it however we want.

146
00:22:44.680 --> 00:22:53.800
potuz: But, so I can just ignore it as a client and not accept off-protocol values if I have this feature flag, or whatever it is.

147
00:22:54.350 --> 00:22:55.290
potuz: Yeah, I don't know.

148
00:22:56.210 --> 00:23:02.949
Justin Traglia: I also think I might have misunderstood. Would value be set to the off protocol value if enforced payment is false?

149
00:23:03.940 --> 00:23:22.999
potuz: Yeah, but also, like, builders might want to actually have two different values, like, they might want to say, take this if you want to accept an in-protocol bid, and if you are willing to accept an off-protocol one, then I'm gonna pay you this other thing. And instead of sending two different bids on two different channels, or putting up two different endpoints.

150
00:23:23.000 --> 00:23:30.120
potuz: This for off-protocol payments, and this for in-protocol payments. They can just send one bid with both values, and the proposer can choose.

151
00:23:30.870 --> 00:23:39.639
Francesco: But, like, if you send one bid with both values, like, aren't they both gonna be… like, aren't you gonna make two payments at the end of the day? Like, how does…

152
00:23:39.910 --> 00:23:42.100
Francesco: I mean, the protocol value is always enforced.

153
00:23:42.960 --> 00:23:44.730
potuz: Yeah, yeah, that's true.

154
00:23:44.930 --> 00:23:48.310
potuz: I don't know. Yeah, this is a problem of speaking up without thinking.

155
00:23:48.850 --> 00:23:52.250
potuz: I don't know how we would enforce one or the other one, I don't know.

156
00:23:55.320 --> 00:23:57.980
potuz: Yeah, I guess I'm gonna have to send two bids anyways.

157
00:24:04.340 --> 00:24:23.860
Francesco: I mean, like, I don't really care too much about this, but just to say, like, I guess one slight benefit of this enforced payment thing is that if it's off, then you can just not run any of the logic that's related to the payment. But yeah, I don't know. Maybe it's even worse, because, like, now you have two, kind of, like, different paths in the.

158
00:24:23.860 --> 00:24:35.610
potuz: Yeah, that's what… that's what I'm worried about, that you need to change the spec in, like, to dealing with this, and it's sort of like having a Boolean in the… I don't like this thing of having control booleans on helpers.

159
00:24:44.800 --> 00:24:49.229
Justin Traglia: Alright, POTUS, could you open up PR for this, or is it too soon to do so?

160
00:24:49.230 --> 00:24:53.430
potuz: I can. I was hoping to wait,

161
00:24:53.580 --> 00:24:57.099
potuz: A week or two. I want to see what's going on with Fossil.

162
00:24:57.470 --> 00:25:15.219
potuz: Because if we… if Fossil is accepted, then we already have this satisfaction of the inclusion list in the engine API. But if FoxSil is not accepted, then I want to have some sort of signal from the EL that there was censoring in the block, in the same, in the same call.

163
00:25:16.420 --> 00:25:20.940
potuz: I can probably open the… just the spec for the… the value on the bid.

164
00:25:21.590 --> 00:25:29.800
potuz: which is on the Beacon chain, on the consensus spec, and then the engine API… I tried to convince Shane of doing it.

165
00:25:32.810 --> 00:25:38.499
Justin Traglia: Okay. It's okay. It's alright if you want to wait a week or two as well. I get that.

166
00:25:38.710 --> 00:25:46.390
Justin Traglia: And this is a pretty good transition into your next topic about adding a censoring flag to the engine API.

167
00:25:46.630 --> 00:25:49.669
Justin Traglia: Do you want to talk some about that? What are the benefits of this?

168
00:25:49.850 --> 00:25:53.519
potuz: Oh, that's… that's a very simple thing. The, the…

169
00:25:53.710 --> 00:26:13.080
potuz: EL clients, most of them, I think, have already implemented this logic already in the… for… for inclusion list. They… they have a way of, picking, what transactions they want to include in the inclusion list, so they have… they are tracking some transactions. And Nevermind even already has this Boolean to say that there has been

170
00:26:13.080 --> 00:26:19.060
potuz: Some censoring going on, because they see some transactions that have stayed in the pool.

171
00:26:19.380 --> 00:26:28.750
potuz: So, what I was hoping is that the EL will have some notion of some transactions that they locally see that they should have been included.

172
00:26:28.950 --> 00:26:38.310
potuz: and they weren't included, for example, transactions that have been sitting in the pool paying, and they could have been included before, and they weren't, or transactions that,

173
00:26:38.410 --> 00:26:44.529
potuz: That were reorged, and, for example, they appeared on a blog, then the reorgan blog didn't include them.

174
00:26:44.630 --> 00:26:46.699
potuz: Those are the most dangerous ones.

175
00:26:46.750 --> 00:27:01.250
potuz: And then if the EL has this notion, and then they see a blog on Notify New Payload, they see that some transactions that they were tracking for a while were censored, and they didn't get included, and they could have been included.

176
00:27:01.250 --> 00:27:10.679
potuz: then, the Yel would just notify this on a Boolean, accept the payload as valid, but then come back with this Boolean saying, this payload was censoring.

177
00:27:11.040 --> 00:27:17.000
potuz: And the consensus client can use this information to blacklist that that builder.

178
00:27:20.920 --> 00:27:22.330
Justin Traglia: Terrence.

179
00:27:23.500 --> 00:27:40.380
terence: Couldn't you use this to grid the builder as well, meaning you send the transactions to everyone except for the builder? I assume builders probably have, like, good memo assets and stuff like that, and then… and then the heuristic is probably generous enough that you waited long enough such that… to ensure the builder

180
00:27:40.380 --> 00:27:43.929
terence: can get the transactions, yeah, just thinking out loud.

181
00:27:44.120 --> 00:27:57.240
potuz: Yeah, this is not something forced anyways, and yeah, so if the EL implements a really bad heuristic, and, like, taking something from your mempool that you just arrived, and it didn't get included in that particular block.

182
00:27:57.370 --> 00:28:00.790
potuz: Then I would say that's an EL bug more than a spec bug.

183
00:28:05.750 --> 00:28:08.920
Justin Traglia: At which point would a builder become unblacklisted?

184
00:28:09.400 --> 00:28:10.450
Justin Traglia: If ever.

185
00:28:10.720 --> 00:28:19.320
potuz: I guess this depends on the CL implementation. I'm not specifying anything. I'm just leaving it up both to the EL to decide what heuristics they want to

186
00:28:19.430 --> 00:28:21.670
potuz: To set this flag as true.

187
00:28:22.070 --> 00:28:25.849
potuz: And to the CR to decide if they even want to act on this or not.

188
00:28:27.330 --> 00:28:28.050
Justin Traglia: Got it.

189
00:28:37.140 --> 00:28:42.939
Justin Traglia: Maybe we can bring this up at ACDC, next week, when discussing fossil.

190
00:28:48.060 --> 00:28:51.620
potuz: I would rather wait for a decision on Fossil.

191
00:28:51.880 --> 00:28:52.739
Justin Traglia: Oh, okay.

192
00:28:52.740 --> 00:28:54.690
potuz: I mean, Yeah, so…

193
00:28:54.690 --> 00:28:58.090
Justin Traglia: Are you saying that we might want to do this if fossil is not included?

194
00:28:58.260 --> 00:29:07.459
potuz: Yeah, this only makes sense if fossil is not included. If fossil is included, this already is included as part of fossil. I mean, there's something better than this included as part of fossil.

195
00:29:08.090 --> 00:29:12.720
Justin Traglia: But you're not, proposing this as an alternative to fossil, correct?

196
00:29:12.720 --> 00:29:23.779
potuz: And yeah, I'm not… I'm definitely not proposing this as an alternative to fossil. That's why I don't want to undermine Fossil by proposing this on ICDC at the same time that Fossil is being discussed.

197
00:29:24.640 --> 00:29:28.620
Justin Traglia: I support that. Yeah, let's talk about this two weeks from today.

198
00:29:29.230 --> 00:29:32.319
Justin Traglia: Or whenever the next, EP glass breakout call is.

199
00:29:33.230 --> 00:29:38.699
Justin Traglia: Okay, moving on to the next agenda item. Shane, would you like to talk about your comment?

200
00:29:41.180 --> 00:29:46.250
Shane Moore: Yeah, it's kind of long, but essentially, in Process Epoch, we're doing…

201
00:29:46.260 --> 00:30:04.979
Shane Moore: Process Builder Pending Payments, right? And that is going to be trying to get a quorum threshold, and let me see if I can even read it, it's kind of small on my screen. And process builder pending payments from the previous epoch… I'm sure it's making a function call to… yeah, if you can make it a little bit bigger, that would kind of help.

202
00:30:07.160 --> 00:30:19.040
Shane Moore: process effective balance of it. Yeah, okay, so we're actually updating the balances on the state, before we're calling this Process Builder Pending Payments, and

203
00:30:19.040 --> 00:30:33.300
Shane Moore: Yeah, I'm just curious if we should be using, like, the previous epochs balances to calculate this quorum threshold within, process builder cutting payments, or if we want, like, the new updated state's effective balance for this

204
00:30:33.450 --> 00:30:43.580
Shane Moore: yeah, basically, do we just want to, like, replace where Process Builder Pending Payments is during process epoch to be before this, like, effective balance updates,

205
00:30:43.770 --> 00:30:48.569
Shane Moore: Or not? And, like, what is the reasoning, one way or another? Because I wasn't sure.

206
00:30:51.750 --> 00:31:07.719
Shane Moore: Because you're, like, essentially processing the builder penny payments from the previous epoch, so I kind of felt like the effective balances from the previous EPOC state should potentially apply for the quorum calculation. And, may help to, like, pull up the spec and look at it, not sure, but yeah.

207
00:31:18.490 --> 00:31:25.810
Shane Moore: the end of Process Epoch, and then you can see in Process Builder, Paying payments.

208
00:31:26.430 --> 00:31:28.660
Justin Traglia: Let me go to this function. Oh, actually, we're already there.

209
00:31:29.380 --> 00:31:30.110
Shane Moore: Yeah.

210
00:31:30.480 --> 00:31:48.530
Shane Moore: And then, like, the first thing, quorum, and you can see, like, there's a line at the top, right? Like, process the builder penny payments from the previous epoch. So I was like, okay, well, if we're processing stuff from previous epoch, maybe use effective balances from previous epoch, but that's not how, processed epoch is currently going, because we have it at the end, and it's after

211
00:31:48.630 --> 00:31:51.659
Shane Moore: The effective balance updates have already been done.

212
00:31:52.890 --> 00:31:53.850
Justin Traglia: I see.

213
00:31:58.400 --> 00:32:00.160
Justin Traglia: I will have to think about this, son.

214
00:32:00.900 --> 00:32:04.049
Justin Traglia: But, do other client teams have opinions?

215
00:32:04.200 --> 00:32:09.170
Justin Traglia: Technically, I think the comment is misleading for process builder payment.

216
00:32:13.050 --> 00:32:15.270
potuz: Which comment is misleading?

217
00:32:15.860 --> 00:32:21.759
Justin Traglia: The… the doc string for, process Builder Pending Payments.

218
00:32:23.240 --> 00:32:26.419
Justin Traglia: It says process, pending payments from the previous EPOC.

219
00:32:26.710 --> 00:32:28.140
Justin Traglia: Or wait, no it's not.

220
00:32:31.960 --> 00:32:33.790
Justin Traglia: I'm confusing myself, I'm sorry.

221
00:32:37.140 --> 00:32:40.719
Justin Traglia: But it is using, effective balances from the…

222
00:32:42.140 --> 00:32:42.670
potuz: Absolutely.

223
00:32:42.670 --> 00:32:43.110
Justin Traglia: Fuck.

224
00:32:43.110 --> 00:32:49.280
potuz: I think what Shane is raising is the fact that we're calling this…

225
00:32:50.310 --> 00:32:59.300
potuz: we're calling this with the… with the balances. Does this come after or before processing the effective balance?

226
00:33:00.460 --> 00:33:01.220
Justin Traglia: After.

227
00:33:01.880 --> 00:33:02.769
Shane Moore: Yes, at the end.

228
00:33:02.770 --> 00:33:03.170
potuz: processes.

229
00:33:03.170 --> 00:33:03.730
Shane Moore: dog.

230
00:33:03.730 --> 00:33:08.080
potuz: So… so, in principle, we might use a threshold, yeah, so…

231
00:33:08.330 --> 00:33:15.119
potuz: I don't know. I don't think it matters much, but I guess semantically, it should be better if we do this before.

232
00:33:20.990 --> 00:33:23.560
potuz: Yeah, I don't know. I need to think about this.

233
00:33:25.060 --> 00:33:25.850
potuz: I'll…

234
00:33:25.850 --> 00:33:31.089
Justin Traglia: with the… Would the fix be simply just moving it before, process effective balance update?

235
00:33:31.090 --> 00:33:33.609
Shane Moore: Yeah, that's actually what I was thinking as well.

236
00:33:34.440 --> 00:33:42.259
potuz: But doing it before… yeah, so changing the order of these kind of things typically, like, affects other things, so that's why I would be worried

237
00:33:42.850 --> 00:33:49.630
potuz: I can't see off the top of my head if there's any danger of moving this function before process effective balances.

238
00:33:53.090 --> 00:33:59.669
Shane Moore: Yeah, I mean, there's a little bit of nested stuff, so, like, within Process Builder, pending payments, the, I think, get…

239
00:33:59.780 --> 00:34:15.380
Shane Moore: it has, like, compute exit epoch, and update churn as well, and compute exit epoch and update churn also will call, like, getEffective Balances as, as well, to calculate exit epoch churn, which is interesting, because, if you were to look at something like, I think.

240
00:34:15.520 --> 00:34:22.269
Shane Moore: process wars and penalties, or, process register updates, like, you won't find it, like, in this,

241
00:34:22.510 --> 00:34:27.710
Shane Moore: like, version of the spec. Those were, like, created in, like, I don't know, Lecture or something. But,

242
00:34:28.170 --> 00:34:33.190
Shane Moore: Yeah, those guys also are gonna try to get effective balances, to be able to, like.

243
00:34:33.429 --> 00:34:37.940
Shane Moore: use, the compute exit, epoch, and update.

244
00:34:37.949 --> 00:34:38.369
potuz: insurance.

245
00:34:38.370 --> 00:34:45.120
Shane Moore: as well, but those are, like, free, state updates. So I'm like, oh, okay, they're both trying to do compute exit epoch and update churn, but, like.

246
00:34:45.120 --> 00:35:02.989
Shane Moore: those rewards ones are before the effective balance updates, but now we're having, process builder penny payments, use the same function, computex epoch and update churn, but with, like, a new state, effective balance. And that was, like, another long consistency that I noticed, and I don't know if it matters or not.

247
00:35:05.330 --> 00:35:12.570
potuz: I'm not sure if it… if it actually matters at the level that… for the values that we have, but one of my biggest grudge

248
00:35:12.690 --> 00:35:24.739
potuz: on the spec today, besides withdrawals, is that little helper, Computexit, epoch, and update churn. It made… since Electra, it made every reason and about any function much more complicated than anything else.

249
00:35:25.040 --> 00:35:29.309
potuz: Because it computes something and it changes the state at the same time.

250
00:35:29.430 --> 00:35:36.209
potuz: I really wish we just didn't have that helper, or we just split it into two different things.

251
00:35:38.640 --> 00:35:56.399
Shane Moore: Yeah, and that was kind of, like, where part of my, like, dislike came from. I was like, okay, like, this is updating state using old, effective balances, for, again, like, process slashings, but now we're gonna be calling compute as epoch, update churn, updating state with.

252
00:35:56.730 --> 00:36:13.909
Shane Moore: process builder penny payments after effective balances have been updated. It just seems, yeah, kind of… yeah, that was the inconsistency. So I was like, okay, if we just move it up, then at least we're gonna be using, like, the same effective balances for, compute exit epoch and update churn, state updates.

253
00:36:15.630 --> 00:36:20.599
potuz: Yeah, my first reaction to this would be not to change anything.

254
00:36:20.920 --> 00:36:35.299
potuz: there's two reasons. One is that we don't really change effective balances that much. And second is the fact that there's a huge difference between the threshold and, I mean, we have, like, a 20% resistance

255
00:36:35.440 --> 00:36:43.299
potuz: To paying, and then, and then the reorg. So, I mean, there's a difference between the proposer boost and the quorum.

256
00:36:43.770 --> 00:36:50.890
potuz: So I think, which is about 20%, and I think that can never be reached, not even close.

257
00:36:51.140 --> 00:37:00.380
potuz: By effective balance changes, so I think it should be perfectly fine just to keep it as is, but I would just defer to French… oh, Francisco's already saying something in the chat.

258
00:37:02.080 --> 00:37:09.129
Francesco: Yeah, I mean, I was just saying exactly this, that I… so, I mean, I think probably the right things to do is to put it before, but…

259
00:37:09.380 --> 00:37:21.909
Francesco: it's almost… like, I don't think the effect is even, like… it's, like, barely measurable. Its effect, it should just be that the security margin just becomes slightly smaller, but it's, like…

260
00:37:22.080 --> 00:37:24.719
Francesco: It's probably, like, a fraction of a percent.

261
00:37:25.440 --> 00:37:30.880
Francesco: So I… I don't know. I think it probably doesn't really matter. One thing maybe I would…

262
00:37:31.030 --> 00:37:44.070
Francesco: want to look a bit more into, unrelated to… I mean, related to this function, but, like, unrelated to the… to the security thing, is actually, yeah, the… what's happening with the exit epochs, just because I know that they're actually where things

263
00:37:44.150 --> 00:38:01.670
Francesco: related to, I think, consolidations, and, like, withdrawal epochs that… where it matters the order in which things were happening in the epoch transition. So, like, if… yeah, if we're adding other things that touch the same kind of exits and withdrawal epoch stuff, maybe it's worth just checking that it's not, like.

264
00:38:01.910 --> 00:38:06.639
Francesco: Kind of breaking any, any existing logic that, depending on,

265
00:38:07.040 --> 00:38:21.059
Francesco: you know, certain things being, like, the only, the only ways in which, like, like, the execute or something was being touched during the epoch transition, but right now I can't, like, say that there's anything wrong, just, yeah, just something to double-check.

266
00:38:25.710 --> 00:38:31.150
Justin Traglia: Is there a reason why we wouldn't want to move, process builder pending payments up?

267
00:38:32.460 --> 00:38:37.090
Justin Traglia: Or is it just, no reason.

268
00:38:37.090 --> 00:38:39.120
potuz: But moving… moving these things…

269
00:38:39.350 --> 00:38:48.649
potuz: It's dangerous. It's hard to reason about. That's… my only fear is that, is that moving would trigger an actual bug.

270
00:38:49.340 --> 00:38:51.860
potuz: It doesn't seem to, but… I don't know.

271
00:38:51.860 --> 00:38:52.610
Justin Traglia: Yeah.

272
00:38:52.870 --> 00:38:56.320
Justin Traglia: I mean, if we're gonna make the change, like, sooner the better, I guess.

273
00:38:57.570 --> 00:39:05.640
Justin Traglia: Shane, could you make a thread on Discord, in the ePBS, channel?

274
00:39:05.790 --> 00:39:08.240
Justin Traglia: And maybe we can continue discussing this there.

275
00:39:08.670 --> 00:39:09.640
Shane Moore: Yeah, for sure.

276
00:39:11.690 --> 00:39:12.790
Justin Traglia: Okay, thank you.

277
00:39:12.920 --> 00:39:18.240
Justin Traglia: Any… does anyone… does anyone else want to say anything about this before we move?

278
00:39:18.470 --> 00:39:19.940
Justin Traglia: Onto the next topic.

279
00:39:23.650 --> 00:39:34.030
potuz: Yeah, just replying to Francesco in this thing. So the reason why I put everything on the end, I think it's just, historical, nothing else. We're just, like…

280
00:39:34.480 --> 00:39:36.970
potuz: Any changes that comes,

281
00:39:38.500 --> 00:39:46.070
potuz: It's easier to reason about changes that come to the state after we've done everything that we did before, and that's it.

282
00:39:46.850 --> 00:39:47.730
Justin Traglia: Yeah.

283
00:39:48.940 --> 00:39:54.900
Justin Traglia: Okay, stefan, would you like to talk about the… the thing you found?

284
00:39:56.940 --> 00:40:00.520
Stefan Bratanov: Yeah, so it's something I spotted during testing.

285
00:40:00.960 --> 00:40:04.129
Stefan Bratanov: Which, basically, we have a function

286
00:40:04.340 --> 00:40:13.559
Stefan Bratanov: when… during the execution processing, which is verifying the prev run DAO, and that's basically using the…

287
00:40:13.960 --> 00:40:19.720
Stefan Bratanov: Post, state when we have already processed the block, so the rundown changes.

288
00:40:20.160 --> 00:40:23.650
Stefan Bratanov: Yeah, so I saw that Pod has already raised the PR.

289
00:40:24.010 --> 00:40:27.159
Stefan Bratanov: For that, which looks good, using the bit.

290
00:40:28.400 --> 00:40:37.070
Stefan Bratanov: So I guess for DevNet, we should probably… put this, and… Yeah, I mean…

291
00:40:37.380 --> 00:40:42.519
Stefan Bratanov: base the DevNet on the next release, which includes this, I guess.

292
00:40:44.610 --> 00:40:52.020
Justin Traglia: Yeah, we can make a new release pretty soon. I was thinking about doing a 1.6.1 release whenever there's, like.

293
00:40:52.390 --> 00:40:53.800
Justin Traglia: A need for one.

294
00:40:56.560 --> 00:40:57.230
Stefan Bratanov: Yeah.

295
00:40:57.510 --> 00:41:03.310
Stefan Bratanov: Yeah, but yeah, putting the program down the beat looks good to me. That's what I had in mind as well.

296
00:41:04.620 --> 00:41:10.510
potuz: It could be… it could be cashed in the state as well, I don't know. Putting it in the bid.

297
00:41:11.350 --> 00:41:17.409
potuz: Makes it, it doesn't, yeah, makes it so that we don't need to be looking in the state.

298
00:41:19.730 --> 00:41:22.239
Stefan Bratanov: Yeah, I think it's better in the bit.

299
00:41:26.860 --> 00:41:32.860
Justin Traglia: And POTUS, why did you put Pref Randall where it is? Just curious. Any logic behind that?

300
00:41:34.670 --> 00:41:39.359
potuz: In the… you mean the position in the… in the container?

301
00:41:39.620 --> 00:41:43.400
potuz: I don't know, there were a bunch of hashes before, so…

302
00:41:43.520 --> 00:41:48.280
potuz: Put all the hashes about in the same place, that usually alignment is good there.

303
00:41:49.720 --> 00:41:50.340
Justin Traglia: Okay.

304
00:41:50.730 --> 00:41:55.100
Justin Traglia: I was just curious, because of our previous discussion, on just adding things to the end.

305
00:41:55.640 --> 00:41:58.169
potuz: Yeah, but this… this thing doesn't exist, right?

306
00:41:59.180 --> 00:42:00.950
Justin Traglia: No, it doesn't. Yeah.

307
00:42:02.640 --> 00:42:11.720
Justin Traglia: Okay, thank you. If clients can approve this PR, I will try to merge it as soon as I can, or as after I review it, and everyone else has.

308
00:42:14.890 --> 00:42:28.139
potuz: Actually, what worries me the most is what Terrence is doing, and I'm definitely not going to do. Why in the hell test would pass? I mean, how can test be checking, be passing at all?

309
00:42:28.840 --> 00:42:34.560
potuz: My guess is that the tests are constructing the payload after

310
00:42:34.850 --> 00:42:39.120
potuz: the block has been constructed. And this is just a logical error.

311
00:42:39.780 --> 00:42:43.460
potuz: Like, no test could ever pass on Gloas.

312
00:42:44.560 --> 00:42:48.449
Stefan Bratanov: Is it not, like, separate processing? I mean…

313
00:42:48.830 --> 00:42:58.070
potuz: Well, but you cannot construct a payload, so today, we cannot construct a payload that actually passes until you have seen the block.

314
00:43:00.680 --> 00:43:01.470
potuz: Right?

315
00:43:04.430 --> 00:43:05.270
Justin Traglia: Terrence?

316
00:43:07.220 --> 00:43:19.340
terence: So the only test we really, really add in and spend time on are the SSD static, and then the block operation and process EPOD test. I think every other test, we just assume it works, hopefully it works.

317
00:43:19.340 --> 00:43:36.199
terence: But we never really look into why, how, and what those tests are. So, yeah, we definitely need to spend more efforts on just, like, the sanity test, like, the block, and just the test that tests the whole stage transition function across multiple slots, or blocks.

318
00:43:40.470 --> 00:43:48.960
potuz: But don't we have tests, like, for process, oh, I see, so probably the tests that check for process execution, payload?

319
00:43:49.590 --> 00:43:53.410
potuz: they… They only focus on that particular function.

320
00:43:53.410 --> 00:43:54.300
terence: What?

321
00:43:54.300 --> 00:43:57.029
potuz: Already have the… yeah, okay, so this…

322
00:43:57.180 --> 00:44:01.790
potuz: Yeah, this can only be caught if we test both at the same time, the block and the payload.

323
00:44:05.160 --> 00:44:09.420
potuz: Okay, I can add a regression test in that PR for this particular issue.

324
00:44:09.680 --> 00:44:11.399
potuz: But definitely not…

325
00:44:11.600 --> 00:44:17.939
potuz: I'm not willing to write a test that, that does both things, the block and the payload. That seems complicated.

326
00:44:17.940 --> 00:44:22.399
terence: Yeah, yeah, I say just add the test for the assert, the deadline.

327
00:44:22.950 --> 00:44:23.830
Justin Traglia: Yeah.

328
00:44:24.360 --> 00:44:29.850
Justin Traglia: Agreed, and then I can talk with Leo about adding More extensive testing.

329
00:44:30.210 --> 00:44:33.659
Justin Traglia: Leo's kind of in charge of the consensus spec tests.

330
00:44:33.910 --> 00:44:34.650
Justin Traglia: So…

331
00:44:39.540 --> 00:44:42.920
Justin Traglia: Okay, is there anything else people want to talk about?

332
00:44:43.660 --> 00:44:45.599
Justin Traglia: I think that was the last agenda item.

333
00:44:46.130 --> 00:44:50.799
potuz: Can we go back to the bid thing? Because this can be probably added to this.

334
00:44:51.060 --> 00:44:51.990
potuz: So…

335
00:44:52.110 --> 00:45:00.659
potuz: Is there a… is there a preference for the… I don't… it wasn't clear to me if Shane and Francesco both preferred the bullion or the value on the bid?

336
00:45:02.330 --> 00:45:09.060
potuz: If it wasn't a strong preference, then I would prefer to add the value directly. To me, it's easier to think about implementation that way.

337
00:45:09.590 --> 00:45:10.930
potuz: I can just ignore it.

338
00:45:19.390 --> 00:45:20.800
Shane Moore: I don't have a strong opinion.

339
00:45:23.310 --> 00:45:25.090
Francesco: Yeah, I mean, me neither.

340
00:45:26.520 --> 00:45:34.829
potuz: Okay, then… then I'll open the PR for the… for the… do you want me… do you guys want me to add the value and the same thing for the random mix?

341
00:45:35.450 --> 00:45:37.660
potuz: And then we just fixed both at the same time?

342
00:45:38.200 --> 00:45:40.020
Justin Traglia: I would prefer separate PR.

343
00:45:40.280 --> 00:45:42.450
potuz: Okay, I'll open, I'll open too.

344
00:45:44.330 --> 00:45:47.489
Justin Traglia: Are you just gonna name the field off protocol value?

345
00:45:47.960 --> 00:45:51.290
potuz: God damn it, I'm horrible with names. I'll take it, whatever you give me.

346
00:45:51.990 --> 00:45:53.160
Justin Traglia: I… I don't know.

347
00:45:53.530 --> 00:45:55.120
Justin Traglia: I mean, that sounds fine to me.

348
00:45:55.120 --> 00:45:57.370
potuz: Trusted value?

349
00:45:57.610 --> 00:45:59.630
Justin Traglia: No, I don't want to use trusted and trusted.

350
00:45:59.960 --> 00:46:01.880
Justin Traglia: I think that confuses people.

351
00:46:02.270 --> 00:46:03.850
potuz: Off protocol volume.

352
00:46:04.050 --> 00:46:07.129
potuz: Or EM, execution layer value, or something like that?

353
00:46:08.900 --> 00:46:14.509
Shane Moore: Yeah, protocol value sounds so odd to put in protocol. It's the most logical thing, too, at the same time.

354
00:46:15.160 --> 00:46:17.430
Justin Traglia: Yeah, I really don't know.

355
00:46:19.590 --> 00:46:26.620
Justin Traglia: I can spend a little bit of time thinking about it, but currently, all protocol value is the most clear thing to me.

356
00:46:26.830 --> 00:46:29.460
Shane Moore: I think it's best. It's weird, funny, you know?

357
00:46:31.410 --> 00:46:33.300
Justin Traglia: Trust me, bro, value. Yeah.

358
00:46:34.230 --> 00:46:37.150
Justin Traglia: Don't know.

359
00:46:39.990 --> 00:46:41.339
Justin Traglia: Yep, I'll think about it.

360
00:46:50.260 --> 00:46:52.460
Justin Traglia: Okay, anything else from anyone?

361
00:46:59.290 --> 00:47:00.230
Justin Traglia: Okay.

362
00:47:00.480 --> 00:47:06.580
Justin Traglia: Thank you, everyone, for attending. Talk to you in two weeks, or whenever the next breakout call is.

363
00:47:08.710 --> 00:47:09.460
potuz: Thank you, guys.

364
00:47:09.460 --> 00:47:10.460
Shane Moore: babe? Bye.

365
00:47:10.900 --> 00:47:11.700
Justin Traglia: Bye, everyone.

366
00:47:13.490 --> 00:47:14.490
Pooja Ranjan: Thank you.

